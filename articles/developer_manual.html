<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Developer Manual â€¢ vsreport</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Developer Manual">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">vsreport</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/vsreport.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/developer_manual.html">Developer Manual</a></li>
    <li><a class="dropdown-item" href="../articles/data_mapping.html">Mapping variables to outputs</a></li>
    <li><a class="dropdown-item" href="../articles/table_templates.html">CRVS tables</a></li>
    <li><a class="dropdown-item" href="../articles/using_git.html">UNKNOWN TITLE</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Developer Manual</h1>
            
      

      <div class="d-none name"><code>developer_manual.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="developer-manual">Developer Manual<a class="anchor" aria-label="anchor" href="#developer-manual"></a>
</h2>
<p>This vignette contains information on how to set-up the package in
order to contribute to the codebase. It also contains information on how
to Maintain and Test the package.</p>
<div class="section level3">
<h3 id="developer-installation">Developer Installation<a class="anchor" aria-label="anchor" href="#developer-installation"></a>
</h3>
<p>If you want to develop the package, you may want to consider cloning
the repository and following the steps below to have the correct
environment to improve the package. First, install the
<code>vsreport</code> from GitHub, then ensure all package dependencies
are correctly managed and installed using <code>renv</code>:</p>
<div class="section level4">
<h4 id="clone-the-repository">1) Clone the repository:<a class="anchor" aria-label="anchor" href="#clone-the-repository"></a>
</h4>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/tech-acs/vsreport.git</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="bu">cd</span> vsreport</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="initialize-the-renv-environment-upon-first-entering-the-package-directory">2) Initialize the <code>renv</code> environment: Upon first entering
the package directory,<a class="anchor" aria-label="anchor" href="#initialize-the-renv-environment-upon-first-entering-the-package-directory"></a>
</h4>
<p><code>renv</code> will activate the specific package environment
defined for <code>vsreport</code>. You need to run the following R
commands to restore the required packages:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"renv"</span><span class="op">)</span></span>
<span><span class="fu">renv</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/renv/reference/restore.html" class="external-link">restore</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>This will read the <code>renv.lock</code> file which contains the
dependencies and install the correct versions of all required
packages.</p>
</div>
<div class="section level4">
<h4 id="once-the-environment-is-set-up-you-can-install-the-package-using">3) Once the environment is set up, you can install the package
using:<a class="anchor" aria-label="anchor" href="#once-the-environment-is-set-up-you-can-install-the-package-using"></a>
</h4>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>By following these steps, you will ensure that you have all the
necessary dependencies and the correct versions installed, allowing
<code>vsreport</code> to function as intended. It will also mean you can
now open the project and develop the package further.</p>
</div>
</div>
<div class="section level3">
<h3 id="maintenance">Maintenance<a class="anchor" aria-label="anchor" href="#maintenance"></a>
</h3>
<p>Once you have made significant changes to the package, there are
several steps that you will need to do:</p>
<ul class="task-list">
<li><label><input type="checkbox">Run the tests</label></li>
<li><label><input type="checkbox">Make sure documentation (like code
structure and other web docs) are updated</label></li>
<li><label><input type="checkbox">Increase the package version. In the
DESCRIPTION file, bump-up the <code>Version</code>
variable.</label></li>
<li><label><input type="checkbox">Update the automated materials using
the instructions below:</label></li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Remove the installed version of the package</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/remove.packages.html" class="external-link">remove.packages</a></span><span class="op">(</span><span class="st">"vsreport"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Clear your R environment</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span>list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html" class="external-link">ls</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Restart R session (do this manually or with RStudio shortcut Ctrl+Shift+F10)</span></span>
<span></span>
<span><span class="co"># Initialize renv if not already done</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="st">"renv"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/installed.packages.html" class="external-link">installed.packages</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"renv"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rstudio.github.io/renv/" class="external-link">renv</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Restore the environment</span></span>
<span><span class="fu">renv</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/renv/reference/restore.html" class="external-link">restore</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Update the lockfile</span></span>
<span><span class="fu">renv</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/renv/reference/snapshot.html" class="external-link">snapshot</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Recreate documentation and rebuild the package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://devtools.r-lib.org/" class="external-link">devtools</a></span><span class="op">)</span></span>
<span><span class="fu">document</span><span class="op">(</span><span class="op">)</span>  <span class="co"># Generates the NAMESPACE file and documentation using roxygen2</span></span>
<span><span class="fu">build</span><span class="op">(</span><span class="op">)</span>     <span class="co"># Builds the package</span></span>
<span><span class="fu"><a href="https://rstudio.github.io/renv/reference/install.html" class="external-link">install</a></span><span class="op">(</span><span class="op">)</span>   <span class="co"># Installs the package</span></span></code></pre></div>
<p>After these steps the package should be installed with the latest
changes to the functions. This should mean the package is in the right
state to be updated on the online repo.</p>
</div>
<div class="section level3">
<h3 id="testing">Testing<a class="anchor" aria-label="anchor" href="#testing"></a>
</h3>
<p>Before you push any changes, double check that all the unit test are
working as expected, by running them manually:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">testthat</span><span class="fu">::</span><span class="fu"><a href="https://testthat.r-lib.org/reference/test_dir.html" class="external-link">test_dir</a></span><span class="op">(</span><span class="st">"tests/testthat"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="codebase-structure">Codebase Structure<a class="anchor" aria-label="anchor" href="#codebase-structure"></a>
</h3>
<p>The repository contains a lot more than just some functions.
Understanding what each folder or section does is important in order to
make changes in the future or to triage any potential issues that may
emerge. The diagram below gives some information on the codebase
structure:</p>
<pre><code>ðŸ“¦vsreport 
â”£ ðŸ“‚.github                           # Contains instructions for GitHub
â”ƒ â”£ ðŸ“‚workflows                       # Contains workflows for GitHub Actions
â”ƒ â”ƒ â”£ ðŸ“œR-CMD-chek.yml                # Automatically runs the tests
â”ƒ â”ƒ â”— ðŸ“œpkgdown.yaml                  # Automatically builds the website
â”ƒ â”— ðŸ“œPULL_REQUEST_TEMPLATE.md        # Adds a checklist for new Pull Requests
â”£ ðŸ“‚R                                 # Contains the R functions
â”£ ðŸ“‚docs                              # AUTOMATED documents built for the web
â”£ ðŸ“‚inst                              # Contains the sample data
â”£ ðŸ“‚man                               # AUTOMATED information on R functions
â”£ ðŸ“‚renv                              # AUTOMATED information on dependencies 
â”£ ðŸ“‚scripts                           # Contains useful scripts for maintenance
â”ƒ â”£ ðŸ“œcreate_test_data.R              # Will generate synthetic data
â”ƒ â”— ðŸ“œupdate_description.R            # Will update the description and dependencies
â”£ ðŸ“‚tests                             # Contains the tests for the R folder
â”£ ðŸ“‚vignettes                         # Contains the explanatory articles
â”£ ðŸ“œ.Rbuildignore                     # Contains exceptions for package build
â”£ ðŸ“œ.Rprofile                         # Contains instructions for dependencies
â”£ ðŸ“œ.gitignore                        # Handles exceptions to GitHub upload
â”£ ðŸ“œCODE_OF_CONDUCT.md                # Information on how to behave
â”£ ðŸ“œCONTRIBUTING.md                   # Guidance on how to contribute to the code
â”£ ðŸ“œDESCRIPTION                       # Metadata for the package
â”£ ðŸ“œLICENSE                           # AUTOMATED package conditions of use
â”£ ðŸ“œLICENSE.md                        # Detailed package conditions of use
â”£ ðŸ“œNAMESPACE                         # AUTOMATED details of package functions
â”£ ðŸ“œREADME.md                         # Introduction article on the package
â”£ ðŸ“œ_pkgdown.yml                      # Structure of the website
â”£ ðŸ“œvsreport.Rproj           # AUTOMATED set-up for R Project
â”— ðŸ“œrenv.lock                         # AUTOMATED information on dependencies</code></pre>
</div>
<div class="section level3">
<h3 id="function-types">Function Types<a class="anchor" aria-label="anchor" href="#function-types"></a>
</h3>
<p>In the package functions can be split into several types. Each type
is identified by their start, usually with verb that informs what the
function goal is. These are:</p>
<ul>
<li>
<code>contruct_</code>: These will construct a new variable or data
for analysis.</li>
<li>
<code>create_</code>: These will create a table by taking some
data.</li>
<li>
<code>handle_</code>: These will handle some of the adjacent
processes.</li>
<li>
<code>plot_</code>: These will help with the visualisation of the
tables or data.</li>
</ul>
</div>
<div class="section level3">
<h3 id="further-reading">Further Reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h3>
<p><a href="https://r-pkgs.org/" class="external-link">R packages</a> by Hadley Wickham and
Jenny Bryan is the canonical guide to R package development.</p>
<p>The <a href="https://psyteachr.github.io" class="external-link">PsyTeachR</a> Coding Club
at the University of Glasgow School of Psychology &amp; Neuroscience
also have some really <a href="https://psyteachr.github.io/intro-r-pkgs/" class="external-link">helpful resources</a>
(a book, YouTube videos) on building R packages.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tesfaye Belay, Pamela Kakande, Rachel Shipsey, Liam Beardsmore.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
